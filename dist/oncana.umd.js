(function(s,d){typeof exports=="object"&&typeof module!="undefined"?d(exports):typeof define=="function"&&define.amd?define(["exports"],d):(s=typeof globalThis!="undefined"?globalThis:s||self,d(s.Oncana={}))})(this,function(s){"use strict";var d="",Q="",R="";const r=document.querySelector(".loader"),a=document.querySelector("#onboarding"),h=a.querySelector('input[name="first-name"]'),b=a.querySelectorAll('input[type="checkbox"]'),C=document.querySelector(".settings"),S=document.querySelector(".btn-settings");var E=Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module",loader:r,form:a,inputFirstName:h,multiCheckBox:b,settings:C,btnSettings:S});const p={}.API,k=p+"/webflow",x=p+"/get-presigned-url",v={"Content-Type":"application/json",Accept:"*"},w=(e,t)=>fetch(x,{method:"POST",body:JSON.stringify({filename:e,filetype:t})}),B=(e,t)=>fetch(e,{method:"PUT",headers:{Accept:"*","Content-Type":"image/png"},body:t}),T=e=>fetch(k,{method:"PATCH",headers:v,body:JSON.stringify(e)}),O=async e=>new Blob([new Uint8Array(await e.arrayBuffer())],{type:e.type}),I=async e=>{const[t,n]=await Promise.all([O(e),w(e.name,e.type)]);if(!n.ok)throw new Error("Could not get url upload");const{uploadUrl:c}=await n.json(),o=await B(c,t);if(!o.ok)throw new Error("Could not upload the image");return o.url},N=e=>e[e.selectedIndex].value,U=(e,t)=>Array.from(e).filter(n=>n.checked&&(t?n.getAttribute("data-type")===t:1)).map(n=>n.name).filter(n=>n),y=async e=>{e.preventDefault(),r&&(r.style.display="fixed");const t=a.elements,n=a.querySelectorAll('input[type="checkbox"]'),c={"webflow-id":t["webflow-id"].value,"first-name":t["first-name"].value,"last-name":t["last-name"].value,dob:t.dob.value,gender:N(t.gender.options),"side-effects":U(n,"side-effect")};if(t.pic.files&&t.pic.files[0])try{const o=t.pic.files[0],l=await I(o);console.log("Image",l),c.image=l}catch(o){console.log(o)}try{if(!(await T(c)).ok)throw console.log("Error"),new Error("Network response was not OK");console.log("Success")}catch(o){console.log(o)}finally{r&&(r.style.display="fixed")}},A=document.getElementById("select-cancer-type"),F=document.getElementById("select-cancer-stage"),j=document.getElementById("select-treatment-type"),q=document.getElementById("select-treatment-stage"),P=document.getElementById("select-eat"),_=document.getElementById("select-move"),M=document.getElementById("checkboxes-side-effect"),L=document.getElementById("checkboxes-live"),J=document.getElementsByClassName("cancer-type-item"),z=document.getElementsByClassName("cancer-stage-item"),D=document.getElementsByClassName("treatment-type-item"),H=document.getElementsByClassName("treatment-stage-item"),K=document.getElementsByClassName("side-effect-item"),W=document.getElementsByClassName("category-item"),u=(e,t,n)=>{t&&n&&e.options.add(new Option(t,n))},g=(e,t,n)=>{const c=document.createElement("label"),o=document.createElement("input");o.type="checkbox",o.name=e,o.setAttribute("data-type",n);const l=document.createElement("span");l.className="checkmark";const i=document.createElement("span");return i.className="checktext",i.innerText=t,c.appendChild(o),c.appendChild(l),c.appendChild(i),c},m=(e,t)=>{Object.values(e).map(n=>{u(t,n.children[0].innerText,n.children[1].innerText)})},G=(e,t,n)=>{Object.values(e).map(c=>{const o=c.children[0].innerText,l=c.children[1].innerText,i=g(o,l,n);t.appendChild(i)})},f=()=>{m(D,j),m(H,q),m(J,A),m(z,F),G(K,M,"side-effect"),Object.values(W).map(e=>{const t=e.children[2].innerText,n=e.children[0].innerText,c=e.children[1].innerText;switch(t){case"Eat":u(P,n,c);break;case"Move":u(_,n,c);break;case"Live":const o=g(n,c,"live");L.appendChild(o);break}})};f(),a.addEventListener("submit",y),s.createFieldsFromCollections=f,s.selector=E,s.submitOnboardingForm=y,Object.defineProperty(s,"__esModule",{value:!0}),s[Symbol.toStringTag]="Module"});
