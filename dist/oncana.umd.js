(function(s,l){typeof exports=="object"&&typeof module!="undefined"?l(exports):typeof define=="function"&&define.amd?define(["exports"],l):(s=typeof globalThis!="undefined"?globalThis:s||self,l(s.oncana={}))})(this,function(s){"use strict";const l=document.querySelector(".loader"),r=document.querySelector("#onboarding"),y=r.querySelector('input[name="first-name"]'),g=r.querySelectorAll('input[type="checkbox"]'),f=document.querySelector(".settings"),h=document.querySelector(".btn-settings");var b=Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module",loader:l,form:r,inputFirstName:y,multiCheckBox:g,settings:f,btnSettings:h});const u={}.API,C=u+"/webflow",S=u+"/get-presigned-url",E={"Content-Type":"application/json",Accept:"*"},k=(e,t)=>fetch(S,{method:"POST",body:JSON.stringify({filename:e,filetype:t})}),x=(e,t)=>fetch(e,{method:"PUT",headers:{Accept:"*","Content-Type":"image/png"},body:t}),w=e=>fetch(C,{method:"PATCH",headers:E,body:JSON.stringify(e)}),B=async e=>new Blob([new Uint8Array(await e.arrayBuffer())],{type:e.type}),T=async e=>{const[t,n]=await Promise.all([B(e),k(e.name,e.type)]);if(!n.ok)throw new Error("Could not get url upload");const{uploadUrl:c}=await n.json(),o=await x(c,t);if(!o.ok)throw new Error("Could not upload the image");return o.url},v=e=>e[e.selectedIndex].value,I=(e,t)=>Array.from(e).filter(n=>n.checked&&(t?n.getAttribute("data-type")===t:1)).map(n=>n.name).filter(n=>n),N=async e=>{e.preventDefault(),l&&(l.style.display="fixed");const t=r.elements,n=r.querySelectorAll('input[type="checkbox"]'),c={"webflow-id":t["webflow-id"].value,"first-name":t["first-name"].value,"last-name":t["last-name"].value,dob:t.dob.value,gender:v(t.gender.options),"side-effects":I(n,"side-effect")};if(t.pic.files&&t.pic.files[0])try{const o=t.pic.files[0],a=await T(o);console.log("Image",a),c.image=a}catch(o){console.log(o)}try{if(!(await w(c)).ok)throw console.log("Error"),new Error("Network response was not OK");console.log("Success")}catch(o){console.log(o)}finally{l&&(l.style.display="fixed")}},O=document.getElementById("select-cancer-type"),U=document.getElementById("select-cancer-stage"),A=document.getElementById("select-treatment-type"),F=document.getElementById("select-treatment-stage"),j=document.getElementById("select-eat"),q=document.getElementById("select-move"),P=document.getElementById("checkboxes-side-effect"),_=document.getElementById("checkboxes-live"),M=document.getElementsByClassName("cancer-type-item"),J=document.getElementsByClassName("cancer-stage-item"),L=document.getElementsByClassName("treatment-type-item"),z=document.getElementsByClassName("treatment-stage-item"),D=document.getElementsByClassName("side-effect-item"),H=document.getElementsByClassName("category-item"),m=(e,t,n)=>{t&&n&&e.options.add(new Option(t,n))},p=(e,t,n)=>{const c=document.createElement("label"),o=document.createElement("input");o.type="checkbox",o.name=e,o.setAttribute("data-type",n);const a=document.createElement("span");a.className="checkmark";const i=document.createElement("span");return i.className="checktext",i.innerText=t,c.appendChild(o),c.appendChild(a),c.appendChild(i),c},d=(e,t)=>{Object.values(e).map(n=>{m(t,n.children[0].innerText,n.children[1].innerText)})},K=(e,t,n)=>{Object.values(e).map(c=>{const o=c.children[0].innerText,a=c.children[1].innerText,i=p(o,a,n);t.appendChild(i)})},W=()=>{d(L,A),d(z,F),d(M,O),d(J,U),K(D,P,"side-effect"),Object.values(H).map(e=>{const t=e.children[2].innerText,n=e.children[0].innerText,c=e.children[1].innerText;switch(t){case"Eat":m(j,n,c);break;case"Move":m(q,n,c);break;case"Live":const o=p(n,c,"live");_.appendChild(o);break}})};s.createFieldsFromCollections=W,s.selector=b,s.submitOnboardingForm=N,Object.defineProperty(s,"__esModule",{value:!0}),s[Symbol.toStringTag]="Module"});
